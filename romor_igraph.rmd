---
title: "romor"
author:
  - 小鹤
documentclass: ctexart
output:
  rticles::ctex:
    fig_caption: yes
    number_sections: yes 
    toc: yes
classoption: "hyperref,"
bibliography: scholar.bib
csl: china-national-standard-gb-t-7714-2015-numeric.csl
---

```{r results='hide',echo=FALSE,include=FALSE}
library(igraph)
# 得到每个节点的进度节点，返回向量
get_in_degree<-function(g,n=1,mode="in"){
  k<-ego(g,n,seq(length(V(g))),mode = mode)
  # 以下注释为不含自身的进度
  # for (i in seq(length(V(g)))) {
  #   k[[i]]<-k[[i]][-which(k[[i]]==i)]
  # }
  return(k)
}
# 得到每个节点的进度节点的数量
get_in_num<-function(k){
  b<-NULL
  for(i in seq(k)){
    b<-c(b,length(k[[i]]))
  }
  return(b)
}
# 得到接受概率
get_acc<-function(num_node,d,p_set){
  p_acc<-matrix(rep(0,num_node*num_node),nrow = num_node)
  for(i in seq(num_node)){
    p_acc[i,]<-(1/(1+(d[i]/d)))*p_set
  }
  return(p_acc)
}
```


# 谣言的传播 

传播模型的来源[@hosni2020minimizing]。

## 个人对于谣言的兴趣程度

1. 个人对谣言感兴趣的程度随着时间的增加而呈现波浪形的衰退，由以下公式表示

$$A(t)=A_{int}e^{-\beta t}cos(\omega t + \delta) \tag{1}$$

其中$A(t)$是$t$时刻个人对谣言感兴趣的程度，$A_{int}$是初始的感兴趣程度，$\beta$是个人的文化程度背景，$\omega$是个人的遗忘因素，每个人的记忆能力不同，$\delta$是的对于谣言的源头的信任程度，决定了犹豫机制。

## 个人对谣言的观点

1. 谣言被分为四类：否认，中立，质疑，支持。我们引入个人$v$对谣言的看法$B_v$,$B_v\in(-\infty,0]$代表了否认，$B_v\in[0,10]$代表了中立，$B_v\in[10,20]$代表了质疑，$B_v\in[20,\infty]$代表了支持。由此文献支持[@wang2017rumor]，展现了人们会出现一种类似牛群的心态，这种心态使人们盲目跟随他人，借用他们的意见。但是，当个人多次收到相同的信息时，由于信息冗余，对个人的影响可能不会像最初那样大[@ma2016rumor]。所以个人针对谣言的观点定义如下：
$$
B_v(t)=\sum_{u\in \mathbb{N}^v}\sum_{j=1}^{n} { \frac{B_u(t-1)}{j}}, \quad for \quad t>0   \tag{2}
$$
其中$\mathbb{N}^v$是个体$v$的邻居节点的集合，$n$是个体$v$受到单个邻居影响的次数。

## 谣言传播规则

1. 本节的重点在谣言如何在多个在线社交网络（online social networks，OSNs）进行传播，关注了人机交互，主要回答了以下问题：谣言什么时候被发送？什么时候会被接受？会在哪一层网络被发送？
2. 带有$n$个网络的OSNs由$\mathbb{G}^n=(I,G^n)$表示，其中$I=(V,C)$代表了个体集；对于每个个体来说，$i\in I$由以下两个内容表示，即$v\in V$节点和$c\in C$个性。个性决定了每个人对于谣言的不同反应，具体可参考 1.1。集合$G^n=\{ G_1=(V,E_1),\quad G_2=(V,E_2), \quad G_3=(V,E_3),...,G_n=(V,E_n) \}$是$n$个网络的集合，其中$G_i=(V,E_i)$是代表网络的有向图。如果$v\in G_i$但是$v\notin G_j$，那么$v$在$G_j$中就是孤立的点。
3. 谣言的传播经过了以下三个步骤：选择某个网络的概率，发布谣言的概率，接受谣言的概率。
4. 由于大多数人喜欢自己受到别人关注，我们认为个体$u$在网络$k$进行发布的概率取决于他在网络$k$的in-degree，所以在$\mathbb{G}^n$中选择网络$k$的概率为
$$
p^k_u={\frac {d^k_{in}(u)}{\sum^n_{i=1}d^i_{in}(u)}} \tag{3}
$$
其中$d^i_{in}(u)$代表了个体$u$在第$i$层网络的in-degree。
5. 发布谣言的概率，这个概率与个人教育背景，遗忘因素，犹豫机制，如果个人越对谣言感兴趣，就越可能发布，所以用${ {A(t)}/{A_{int}}}$表示，在$t$时刻的概率如下：
$$
p^{send}_{u}(t)=e^{-\beta t}|sin(\omega t+\delta)| \tag{4}
$$
6. 接受的概率。我们认为个体具有更高的in-degree，影响力越大[@kempe2003maximizing]，但是具有高in-degree的个体不容易受到影响，所以在$k$层发送者$u$和接受者$v$接受概率的公式如下
$$
p^{acc}_{v,u}={\frac {1}{1+d^k_{in}(v)/d^k_{in}(u)}}.P \tag{5}
$$
$P$为传播过程中的概率参数。
7. 两个节点$u,\quad v$在$k$层的谣言传播概率如下：
$$
p^k_{u,v}(t)=p^k_u.p^{send}_u(t).p^{acc}_{u,v} \tag{6}
$$

## 谣言的传播过程

1. 在时间$t=0$，一些个体会在$\mathbb{G}^n$的不同层中散播谣言，这些个体对谣言有着不同的信念，其他的个体对这件事不知情。在此过程中，如果有无知的个体根据公式$(6)$接受谣言，他们也会成为传播者，行为会遵循公式$(1)$，
2. 每个时间点有人接受了谣言，接受者针对谣言的观点就会根据公式$(2)$进行更新。个人可以接受多个谣言，但是只能传递每个接受的谣言一次。当参与者对谣言的兴趣消退时，便不会参与传播过程。
3. 当谣言的人气恶化时，传播过程就结束了。在传播过程中，即$R(t)\simeq 0$。具体表达如下，其中$R_i(t)$表示了第$i$层累计的吸引力（考虑个人的权威程度）。
$$
R(t)=\sum_{i=1}^nR_i(t)\quad where \quad R_i(t)=\sum_{v\in V}A_v(t).d_{in}^i(v) \tag{7}
$$


## 参数的确定
1. $\beta\in[0.2,1.2]$, $\omega\in[\pi/12,\pi]$,$\delta\in[\pi/24,\pi/2]$
2. 初始有10个节点被选择成为传播者，其观点也是随机的正或负

## 衡量的指标

1. 传播者的数量的变化
2. 谣言传播情况（最后感染谣言的人数）
3. 谣言人气的衡量，如公式$(7)$所示。
4. 对谣言有正面（负面）法的人数的演变。
5. 谣言的影响，感染的人数并且没有负面观点的人数。

## 目标

1. 限制谣言的传播
2. 增加不信任谣言的人数

## 说明

这篇文章提出的谣言的人气是新的衡量谣言演变的工具。

# 有向网络的传播

## 建立网络

1. 使用BA模型建立无标度网络，规模设置为1000，个数为3.

```{r echo=FALSE}
# num_node 节点node的数量
num_node<-1000
seed<-c(1:100)
set.seed(seed[1])
g1 <- sample_pa(num_node)
set.seed(seed[2])
g2 <- sample_pa(num_node)
set.seed(seed[3])
g3 <- sample_pa(num_node)

```

2. 计算每个节点的in-degree

```{r }
# k 序列，每个graph的节点的进度详情
k1<-get_in_degree(g1)
k2<-get_in_degree(g2)
k3<-get_in_degree(g3)

# d 矩阵，每个graph的节点的进度数量,d[i,j]为个体i在网络j的进度数量,最后一列为进度总数
d<-matrix(rep(0,num_node*(3+1)), nrow = num_node, ncol = 4)
d[,1]<-get_in_num(k1)
d[,2]<-get_in_num(k2)
d[,3]<-get_in_num(k3)
d[,4]<-d[,1]+d[,2]+d[,3]

```

## 给个体分配属性

```{r}
id_all<-matrix(rep(0,num_node*3),ncol = 3)
set.seed(100)
# beta
id_all[,1]<-runif(num_node,0.2,0.8)
# omega
id_all[,2]<-runif(num_node,pi/12,pi/2)
# delta
id_all[,3]<-runif(num_node,pi/24,pi/3)

```

## 看法以及感兴趣程度

```{r}
# time_step 实验的时间数，步数; a[i,j]为个体i在时间j对谣言的感兴趣程度
time_step<-500
a<-matrix(rep(0,time_step*num_node),ncol = time_step)
# b[i,j]为个体i在时间j对谣言的看法
b<-matrix(rep(0,time_step*num_node),ncol = time_step)
```

## 计算不同概率的公式

1. 选择在网络上发布的概率
```{r}
# 不同个体选择在哪个网络发布的概率,p_net[i,j]为个体i在网络j发布的概率

p_net<-matrix(rep(0,3*num_node),nrow = num_node,ncol = 3)
p_net[,1]<-d[,1]/d[,4]
p_net[,2]<-d[,2]/d[,4]
p_net[,3]<-d[,3]/d[,4]
```

2. 发布谣言的概率

```{r}
# p_send[i,j]是个体i在时间j发布的概率
p_send<-matrix(rep(0,time_step*num_node),nrow = num_node)

```

3. 接受谣言的概率
```{r}
# p_set为模型中的P,设定的概率参数
p_set<-0.8
# p_acc1[i,j]为接受者i，发送者v的接受概率
# p_acc1<-matrix(rep(0,num_node*num_node),nrow = num_node)
# for(i in seq(num_node)){
#   p_acc1[i,]<-(1/(1+(d[i,1]/d[,1])))*p_set
# }
p_acc1<-get_acc(num_node,d[,1],p_set)
p_acc2<-get_acc(num_node,d[,2],p_set)
p_acc3<-get_acc(num_node,d[,3],p_set)
# p_acc为多个矩阵的集合，方便计算
p_acc<-list(p_acc1,p_acc2,p_acc3)

```


4. 传播过程

```{r}






```












# 参考文献














